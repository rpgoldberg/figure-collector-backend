FROM node:20

WORKDIR /app

# Copy package files
COPY package*.json ./

# Install all dependencies 
RUN npm install

# Copy source and tests
COPY . .

# Create coverage output directory
RUN mkdir -p coverage

# Default command runs the existing working test setup
CMD ["npm", "run", "test:memory"]